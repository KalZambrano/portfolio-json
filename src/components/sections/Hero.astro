---
import SectionContainer from "@/components/SectionContainer.astro";
import Mail from "@/assets/mail.svg";
import Phone from "@/assets/phone.svg";
import X from "@/assets/social/x.svg";
import LinkedIn from "@/assets/social/linkedin.svg";
import GitHub from "@/assets/social/github.svg";
import WorldMap from "@/assets/worldmap.svg";
import type { SocialIcon } from "@/types";

const { basics } = Astro.props;

const { name, label, image, location, profiles, phone, email } = basics;
const { city, region } = location;

const SOCIAL_ICONS: SocialIcon = {
  GitHub,
  LinkedIn,
  X,
};
---

<SectionContainer animate="animate-fade-in-up">
  <div
    class="flex flex-col-reverse items-center gap-8 md:flex-row md:justify-between"
  >
    <!-- Info -->
    <div class="flex max-w-2xl flex-col gap-4 text-center md:text-left">
      <div class="space-y-2">
        <h1
          class="text-3xl font-bold tracking-tight text-zinc-900 dark:text-zinc-100 sm:text-4xl"
        >
          {name}
        </h1>

        <div class="relative">
          <h2
            class="relative z-10 inline-block text-lg font-medium text-amber-600 dark:text-amber-400"
          >
            {label}
          </h2>
          <div
            class="md:block hidden absolute -left-1 -right-1 bottom-0.5 z-0 h-2 bg-amber-100 dark:bg-amber-900/50 rounded-full"
          >
          </div>
        </div>
      </div>

      <div
        class="flex items-center justify-center gap-2 text-sm text-zinc-600 dark:text-zinc-300 md:justify-start"
      >
        <WorldMap class="h-4 w-4 shrink-0" />
        <span>{city}, {region}</span>
      </div>

      <!-- Actions -->
      <footer
        class="no-print mt-2 flex flex-wrap justify-center gap-3 md:justify-start [&>a]:text-zinc-700 dark:[&>a]:text-zinc-300"
      >
        {
          email && (
            <a
              href={`mailto:${email}`}
              title={`Enviar correo a ${name}`}
              class="flex size-10 items-center justify-center rounded-full bg-white/80 p-2 shadow-sm ring-1 ring-zinc-200 transition-all hover:bg-white hover:ring-2 hover:ring-amber-500/30 hover:shadow-md dark:bg-zinc-800/80 dark:ring-zinc-700/50 dark:hover:bg-zinc-800"
            >
              <Mail />
            </a>
          )
        }

        {
          phone && (
            <a
              href={`tel:${phone}`}
              title={`Llamar a ${name}`}
              class="flex size-10 items-center justify-center rounded-full bg-white/80 p-2 shadow-sm ring-1 ring-zinc-200 transition-all hover:bg-white hover:ring-2 hover:ring-amber-500/30 hover:shadow-md dark:bg-zinc-800/80 dark:ring-zinc-700/50 dark:hover:bg-zinc-800"
            >
              <Phone />
            </a>
          )
        }

        {
          profiles.map(({ network, url, username }) => {
            const Icon = SOCIAL_ICONS[network];

            return (
              <a
                class="flex size-10 items-center justify-center rounded-full bg-white/80 p-2 shadow-sm ring-1 ring-zinc-200 transition-all hover:bg-white hover:ring-2 hover:ring-amber-500/30 hover:shadow-md dark:bg-zinc-800/80 dark:ring-zinc-700/50 dark:hover:bg-zinc-800"
                href={url}
                title={`Visitar el perfil de ${name} en ${network}`}
                target="_blank"
                rel="noopener noreferrer"
              >
                <Icon class="h-5 w-5" />
              </a>
            );
          })
        }
      </footer>
    </div>

    <!-- Avatar -->
    <figure class="shrink-0">
      <img
        src={image}
        alt={name}
        class="size-32 rounded-2xl object-cover
          ring-1 ring-zinc-200
          dark:ring-zinc-800"
        width="128"
        height="128"
      />
    </figure>
  </div>
</SectionContainer>
